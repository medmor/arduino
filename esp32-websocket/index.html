<!DOCTYPE html>
<html>

<head>
    <title>WebSocket Example</title>
</head>

<body>
    <h1>WebSocket Example</h1>
    <button id="sendButton">Send Message</button>
    <div id="status">Not connected</div>

    <script>
        let ws;

        function initWebSocket() {
            ws = new WebSocket('ws://192.168.1.20/ws'); // Replace with your ESP8266 IP address and WebSocket endpoint

            ws.onopen = function () {
                document.getElementById('status').innerText = 'Connected to WebSocket server';
                console.log('WebSocket connection opened');
            };

            ws.onmessage = function (event) {
                console.log('Message from server: ', event.data);
            };

            ws.onclose = function () {
                document.getElementById('status').innerText = 'Disconnected from WebSocket server';
                console.log('WebSocket connection closed');
            };

            ws.onerror = function (error) {
                console.error('WebSocket error: ', error);
            };
        }

        document.getElementById('sendButton').addEventListener('click', function () {
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send('Hello from client');
            } else {
                console.log('WebSocket is not open');
            }
        });

        // Initialize WebSocket connection
        initWebSocket();
    </script>
</body>

</html>